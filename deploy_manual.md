1   
    2  git --version
    3  dnf update -y
    4  dnf install -y python3 python3-pip python3-virtualenv git
    5  history
    6  dnf install -y python3 python3-pip python3-virtualenv git
    7  sudo mkdir -p /opt/web-backend-python
    8  sudo chown $USER:$USER /opt/web-backend-python
    9  cd /opt/web-backend-python
   10  git clone https://github.com/ultra-ai-labs/web-backend-python.git
   11  cd web-backend-python/
   12  python3 -m venv venv
   13  source venv/bin/activate
   14  python -m pip install --upgrade pip setuptools wheel
   15  vi .env
   16  source venv/bin/activate
   17  pip install -r requirements.txt
   18  python3 db.py
   19  python db.py
   20  python3 db.py
   21  pip uninstall -y opencv-python
   22  pip install opencv-python-headless==4.9.0.80
   23  python3 db.py
   24  vi .env
   25  python3 db.py
   26  cat .env
   27  python3 db.py
   28  mysql -u root -p'happyai@2026' -h hk-cdb-jl1vyxrj.sql.tencentcdb.com -P 22991 -e "CREATE DATABASE IF NOT EXISTS media_crawler CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
   29  python3 db.py
   30  python3 main.py
   31  sudo yum install -y zbar zbar-devel
   32  python3 db.py
   33  ls
   34  cd Desktop/
   35  ls
   36  cd 数据分析/
   37  ls
   38  cd ~
   39  cd /opt/web-backend-python/web-backend-python/
   40  nohup venv/bin/gunicorn -w 2 -b 0.0.0.0:8000 main:app > /var/log/web-backend.log 2>&1 &
   41  source venv/bin/activate
   42  python3 main.py
   43  git oull
   44  git pull
   45  python3 main.py
   46  git pull
   47  python3 main.py
   48  cd /opt/web-backend-python/web-backend-python/
   49  git oull
   50  git pull
   51  python3 db.py
   52  source venv/bin/activate
   53  python3 db.py
   54  cd /opt/web-backend-python/web-backend-python/
   55  history 
   56  source venv/bin/activate
   57  python3 main.py
   58  git pull
   59  python3 main.py
   60  python3 n_main.py
   61  git pull
   62  python3 n_main.py
   63  git pull
   64   curl http://124.156.182.182:3000
   65  cd  /opt/web-backend-python
   66  ls
   67  cd web-backend-python/
   68  source /venv/bin/activate
   69  source venv/bin/activate
   70  nohup python3 /opt/web-backend-python/main.py > /var/log/web-backend-nohup.log 2>&1 &
   71  pkill -f main.py || true
   72  nohup python3 /opt/web-backend-python/n_main.py > /var/log/web-backend-nohup.log 2>&1 &
   73  kill -f main.py || true
   74  git pull
   75  kill -f main.py || true
   76  kill -f n_main.py || true
   77  nohup python3 /opt/web-backend-python/n_main.py > /var/log/web-backend-nohup.log 2>&1 &
   78  ps -ef | grep python
   79  nohup python3 /opt/web-backend-python/n_main.py > /var/log/web-backend-nohup.log 2>&1 &
   80  cat /var/log/web-backend-nohup.log
   81  pwd
   82  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
   83  cat /var/log/web-backend-nohup.log
   84  cat /opt/web-backend-python/web-backend-python/.env
   85  cd /opt/web-backend-python/web-backend-python/
   86  git pull
   87  pkill -f n_main.py
   88  source /venv/bin/activate
   89  source venv/bin/activate
   90  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
   91  tail -f /var/log/web-backend-nohup.log
   92  vi .env
   93  pkill -f n_main.py
   94  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
   95  tail -f /var/log/web-backend-nohup.log
   96  pkill -f n_main.py
   97  git pull
   98  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
   99  ls
  100  cd /opt/web-backend-python/web-backend-python/
  101  ls
  102  ps -ef | grep python
  103  ls -lh nohup.out
  104  tail -f nohup.out  # 实时查看日志最后几行
  105  history
  106     95  tail -f /var/log/web-backend-nohup.log
  107  tail -f /var/log/web-backend-nohup.log
  108  history
  109   source venv/bin/activate
  110  playwright install
  111  sudo playwright install-deps
  112  history
  113  pkill -f n_main.py
  114  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  115  tail -f /var/log/web-backend-nohup.log
  116  cat .env 
  117  tail -f /var/log/web-backend-nohup.log
  118  git branch -a
  119  git pull
  120  pkill -f n_main.py
  121  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  122  tail -f /var/log/web-backend-nohup.log
  123  git pull
  124  pkill -f n_main.py
  125  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  126  tail -f /var/log/web-backend-nohup.log
  127  pkill -f n_main.py
  128  git pull
  129  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  130  tail -f /var/log/web-backend-nohup.log
  131  mysql -h hk-cdb-jl1vyxrj.sql.tencentcdb.com -P 22991 -u root -p
  132  yum install -y mysql
  133  mysql -h hk-cdb-jl1vyxrj.sql.tencentcdb.com -P 22991 -u root -p
  134  tail -f /var/log/web-backend-nohup.log
  135  cat .env
  136  vim .env
  137  pkill -f n_main.py
  138  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  139  tail -f /var/log/web-backend-nohup.log
  140  pkill -f n_main.py
  141  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  142  tail -f /var/log/web-backend-nohup.log
  143  source venv/bin/activate
  144  python -c "from playwright.sync_api import sync_playwright; p = sync_playwright().start(); print(p.chromium.executable_path)"
  145  python3 -c "from playwright.sync_api import sync_playwright; p = sync_playwright().start(); print(p.chromium.executable_path)"
  146  pkill -f n_main.py
  147  git pull
  148  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  149  tail -f /var/log/web-backend-nohup.log
  150  git pull
  151  pkill -f n_main.py
  152  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  153  tail -f /var/log/web-backend-nohup.log
  154  (venv) [root@VM-4-13-opencloudos web-backend-python]# nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  155  playwright install-deps chromium
  156  sudo yum install -y epel-release
  157  sudo yum install -y     libX11     libXext     libxcb     libXrandr     libXdamage     libXcomposite     libXcursor     libXi     libXtst     libXScrnSaver     alsa-lib     atk     at-spi2-atk     cairo     cups-libs     dbus-libs     expat     glibc     gtk3     libdrm     libgcc     libgbm     libstdc++     libxkbcommon     nss     nspr     pango     liberation-fonts     dejavu-fonts
  158  pkill -f n_main.py
  159  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  160  tail -f /var/log/web-backend-nohup.log
  161  sudo yum install -y nodejs npm
  162  node --version
  163  npm --version
  164  pkill -f n_main.py
  165  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  166  ls
  167  tail -f /var/log/web-backend-nohup.log
  168  git pull
  169  pkill -f n_main.py
  170  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  171  tail -f /var/log/web-backend-nohup.log
  172  git pull
  173  pkill -f n_main.py
  174  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  175  tail -f /var/log/web-backend-nohup.log
  176  git pull
  177  pkill -f n_main.py
  178  tail -f /var/log/web-backend-nohup.log
  179  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  180  tail -f /var/log/web-backend-nohup.log
  181  git pull
  182  pkill -f n_main.py
  183  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  184  tail -f /var/log/web-backend-nohup.log
  185  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  186  pkill -f n_main.py
  187  git pull
  188  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  189  pkill -f n_main.py
  190  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  191  tail -f /var/log/web-backend-nohup.log
  192  git pull
  193  pkill -f n_main.py
  194  git pull
  195  pkill -f n_main.py
  196  tail -f /var/log/web-backend-nohup.log
  197  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  198  ls
  199  cd /opt/web-backend-python/web-backend-python/
  200  git pull
  201  systemctl status web-backend-python
  202  ps aux | grep python | grep main.py
  203  ps aux | grep "web-backend-python" | grep main.py
  204  cd /opt/web-backend-python/web-backend-python/
  205  ls -la nohup* 
  206  cat nohup.out | tail -50
  207  find /opt -name "*.sh" -o -name "*.service" -o -name "Dockerfile" 2>/dev/null | grep -i "backend\|web"
  208  ls -la /etc/supervisor/conf.d/ | grep backend
  209  ls -la /etc/systemd/system/ | grep backend
  210  find /opt -type d -name "web-backend*" 2>/dev/null
  211  ps aux | grep -E "python|nohup" | head -20
  212  history
  213  pkill -f n_main.py
  214  cd venv/
  215  ls
  216  cd source venv/bin/activate
  217  cd ..
  218  source venv/bin/activate
  219  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  220  tail -f /var/log/web-backend-nohup.log
  221  curl -X POST http://127.0.0.1:3001/get_simple_marketing_user   -H "Content-Type: application/json"   -d '{"task_id":"673809008045457408","task_step_type":3}'
  222  pkill -f n_main.py
  223  git pull
  224  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  225  tail -f /var/log/web-backend-nohup.log
  226  curl -X POST http://127.0.0.1:3001/get_simple_marketing_user   -H "Content-Type: application/json"   -d '{"task_id":"673809008045457408","task_step_type":3}'
  227  tail -f /var/log/web-backend-nohup.log
  228  pkill -f n_main.py
  229  git pull
  230  nohup python3 n_main.py > /var/log/web-backend-nohup.log 2>&1 &
  231  tail -f /var/log/web-backend-nohup.log
  232  curl http://127.0.0.1:3001/health
  233  tail -f /var/log/web-backend-nohup.log
  234  curl -X POST http://127.0.0.1:3001/get_simple_marketing_user   -H "Content-Type: application/json"   -d '{"task_id":"673809008045457408","task_step_type":3}'
  235  tail -f /var/log/web-backend-nohup.log
  236  curl -X POST http://127.0.0.1:3001/get_simple_marketing_user   -H "Content-Type: application/json"   -d '{"task_id":"673809008045457408","task_step_type":3}'
  237  tail -f /var/log/web-backend-nohup.log
  238  curl -X POST http://124.156.182.182:3001/get_simple_marketing_user   -H "Content-Type: application/json"   -d '{"task_id":"673809008045457408","task_step_type":3}'
  239  tail -50 /var/log/nginx/error.log
  240  netstat -tlnp | grep 3001
  241  tail -f /var/log/web-backend-nohup.log
  242  cd /opt/web-backend-python/web-backend-python/
  243  cat .env
  244  history